if(Event===void 0)var Event={};if(eventjs===void 0)var eventjs=Event;if(function(e){"use strict";e.modifyEventListener=!0,e.modifySelectors=!0,e.add=function(e,t,r,o){return n(e,t,r,o,"add")},e.remove=function(e,t,r,o){return n(e,t,r,o,"remove")},e.stop=function(e){e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.bubble=0)},e.prevent=function(e){e&&(e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation(),e.returnValue=!1)},e.cancel=function(t){e.stop(t),e.prevent(t)},e.getEventSupport=function(e,t){if("string"==typeof e&&(t=e,e=window),t="on"+t,t in e)return!0;if(e.setAttribute||(e=document.createElement("div")),e.setAttribute&&e.removeAttribute){e.setAttribute(t,"");var n="function"==typeof e[t];return e[t]!==void 0&&(e[t]=null),e.removeAttribute(t),n}};var t=function(e){if(!e||"object"!=typeof e)return e;var n=new e.constructor;for(var r in e)n[r]=e[r]&&"object"==typeof e[r]?t(e[r]):e[r];return n},n=function(i,a,u,l,p,g){if(l=l||{},"[object Object]"==i+""){var m=i;i=m.target,a=m.type,u=m.listener,delete m.target,delete m.type,delete m.listener;for(var E in m)l[E]=m[E]}if(i&&a&&u){if("string"!=typeof i||"ready"!==a){if("string"==typeof i){if(i=document.querySelectorAll(i),0===i.length)return o("Missing target on listener!",arguments);1===i.length&&(i=i[0])}var y,h={};if(i.length>0&&i!==window){for(var x=0,w=i.length;w>x;x++)y=n(i[x],a,u,t(l),p),y&&(h[x]=y);return r(h)}if(a.indexOf&&-1!==a.indexOf(" ")&&(a=a.split(" ")),a.indexOf&&-1!==a.indexOf(",")&&(a=a.split(",")),"string"!=typeof a){if("number"==typeof a.length)for(var P=0,b=a.length;b>P;P++)y=n(i,a[P],u,t(l),p),y&&(h[a[P]]=y);else for(var E in a)y="function"==typeof a[E]?n(i,E,a[E],t(l),p):n(i,E,a[E].listener,t(a[E]),p),y&&(h[E]=y);return r(h)}if("object"!=typeof i)return o("Target is not defined!",arguments);if("function"!=typeof u)return o("Listener is not a function!",arguments);var M=l.useCapture||!1,G=d(i)+"."+d(u)+"."+(M?1:0);if(e.Gesture&&e.Gesture._gestureHandlers[a]){if(G=a+G,"remove"===p){if(!v[G])return;v[G].remove(),delete v[G]}else if("add"===p){if(v[G])return v[G].add(),v[G];if(l.useCall&&!e.modifyEventListener){var T=u;u=function(e,t){for(var n in t)e[n]=t[n];return T.call(i,e)}}l.gesture=a,l.target=i,l.listener=u,l.fromOverwrite=g,v[G]=e.proxy[a](l)}return v[G]}for(var D,L=s(a),X=0;L.length>X;X++)if(a=L[X],D=a+"."+G,"remove"===p){if(!v[D])continue;i[f](a,u,M),delete v[D]}else if("add"===p){if(v[D])return v[D];i[c](a,u,M),v[D]={id:D,type:a,target:i,listener:u,remove:function(){for(var t=0;L.length>t;t++)e.remove(i,L[t],u,l)}}}return v[D]}var Y=(new Date).getTime(),k=l.timeout,H=l.interval||1e3/60,U=window.setInterval(function(){(new Date).getTime()-Y>k&&window.clearInterval(U),document.querySelector(i)&&(window.clearInterval(U),setTimeout(u,1))},H)}},r=function(e){return{remove:function(){for(var t in e)e[t].remove()},add:function(){for(var t in e)e[t].add()}}},o=function(e,t){"undefined"!=typeof console&&void 0!==console.error&&console.error(e,t)},i={msPointer:["MSPointerDown","MSPointerMove","MSPointerUp"],touch:["touchstart","touchmove","touchend"],mouse:["mousedown","mousemove","mouseup"]},a={MSPointerDown:0,MSPointerMove:1,MSPointerUp:2,touchstart:0,touchmove:1,touchend:2,mousedown:0,mousemove:1,mouseup:2};(function(){e.supports={},window.navigator.msPointerEnabled&&(e.supports.msPointer=!0),e.getEventSupport("touchstart")&&(e.supports.touch=!0),e.getEventSupport("mousedown")&&(e.supports.mouse=!0)})();var s=function(){return function(t){var n=document.addEventListener?"":"on",r=a[t];if(isFinite(r)){var o=[];for(var s in e.supports)o.push(n+i[s][r]);return o}return[n+t]}}(),v={},u=0,d=function(e){return e===window?"#window":e===document?"#document":(e.uniqueID||(e.uniqueID="e"+u++),e.uniqueID)},c=document.addEventListener?"addEventListener":"attachEvent",f=document.removeEventListener?"removeEventListener":"detachEvent";return e.createPointerEvent=function(t,n,r){var o=n.gesture,i=n.target,a=t.changedTouches||e.proxy.getCoords(t);if(a.length){var s=a[0];n.pointers=r?[]:a,n.pageX=s.pageX,n.pageY=s.pageY,n.x=n.pageX,n.y=n.pageY}var v=document.createEvent("Event");v.initEvent(o,!0,!0),v.originalEvent=t;for(var u in n)"target"!==u&&(v[u]=n[u]);var d=v.type;e.Gesture&&e.Gesture._gestureHandlers[d]&&n.oldListener.call(i,v,n,!1)},e.modifyEventListener&&window.HTMLElement&&function(){var t=function(t){var r=function(r){var o=r+"EventListener",i=t[o];t[o]=function(t,o,a){if(e.Gesture&&e.Gesture._gestureHandlers[t]){var v=a;"object"==typeof a?v.useCall=!0:v={useCall:!0,useCapture:a},n(this,t,o,v,r,!0)}else for(var u=s(t),d=0;u.length>d;d++)i.call(this,u[d],o,a)}};r("add"),r("remove")};navigator.userAgent.match(/Firefox/)?(t(HTMLDivElement.prototype),t(HTMLCanvasElement.prototype)):t(HTMLElement.prototype),t(document),t(window)}(),e.modifySelectors&&function(){var e=NodeList.prototype;e.removeEventListener=function(e,t,n){for(var r=0,o=this.length;o>r;r++)this[r].removeEventListener(e,t,n)},e.addEventListener=function(e,t,n){for(var r=0,o=this.length;o>r;r++)this[r].addEventListener(e,t,n)}}(),e}(Event),Event===void 0)var Event={};if(Event.proxy===void 0&&(Event.proxy={}),Event.proxy=function(e){"use strict";e.pointerSetup=function(e,t){e.doc=e.target.ownerDocument||e.target,e.minFingers=e.minFingers||e.fingers||1,e.maxFingers=e.maxFingers||e.fingers||1/0,e.position=e.position||"relative",delete e.fingers,t=t||{},t.enabled=!0,t.gesture=e.gesture,t.target=e.target,t.env=e.env,Event.modifyEventListener&&e.fromOverwrite&&(e.oldListener=e.listener,e.listener=Event.createPointerEvent);var n=0,r=0===t.gesture.indexOf("pointer")&&Event.modifyEventListener?"pointer":"mouse";return e.oldListener&&(t.oldListener=e.oldListener),t.listener=e.listener,t.proxy=function(n){t.defaultListener=e.listener,e.listener=n,n(e.event,t)},t.add=function(){t.enabled!==!0&&(e.onPointerDown&&Event.add(e.target,r+"down",e.onPointerDown),e.onPointerMove&&Event.add(e.doc,r+"move",e.onPointerMove),e.onPointerUp&&Event.add(e.doc,r+"up",e.onPointerUp),t.enabled=!0)},t.remove=function(){t.enabled!==!1&&(e.onPointerDown&&Event.remove(e.target,r+"down",e.onPointerDown),e.onPointerMove&&Event.remove(e.doc,r+"move",e.onPointerMove),e.onPointerUp&&Event.remove(e.doc,r+"up",e.onPointerUp),t.reset(),t.enabled=!1)},t.pause=function(t){!e.onPointerMove||t&&!t.move||Event.remove(e.doc,r+"move",e.onPointerMove),!e.onPointerUp||t&&!t.up||Event.remove(e.doc,r+"up",e.onPointerUp),n=e.fingers,e.fingers=0},t.resume=function(t){!e.onPointerMove||t&&!t.move||Event.add(e.doc,r+"move",e.onPointerMove),!e.onPointerUp||t&&!t.up||Event.add(e.doc,r+"up",e.onPointerUp),e.fingers=n},t.reset=function(){e.tracker={},e.fingers=0},t};var t=Event.supports;return Event.pointerType=t.mouse?"mouse":t.touch?"touch":"mspointer",e.pointerStart=function(t,n,r){var o=(t.type||"mousedown").toUpperCase();0===o.indexOf("MOUSE")?Event.pointerType="mouse":0===o.indexOf("TOUCH")?Event.pointerType="touch":0===o.indexOf("MSPOINTER")&&(Event.pointerType="mspointer");var i=function(e,t){var n=r.bbox,o=s[t]={};switch(r.position){case"absolute":o.offsetX=0,o.offsetY=0;break;case"differenceFromLast":o.offsetX=e.pageX,o.offsetY=e.pageY;break;case"difference":o.offsetX=e.pageX,o.offsetY=e.pageY;break;case"move":o.offsetX=e.pageX-n.x1,o.offsetY=e.pageY-n.y1;break;default:o.offsetX=n.x1,o.offsetY=n.y1}if("relative"===r.position)var i=e.pageX+n.scrollLeft-o.offsetX,a=e.pageY+n.scrollTop-o.offsetY;else var i=e.pageX-o.offsetX,a=e.pageY-o.offsetY;o.rotation=0,o.scale=1,o.startTime=o.moveTime=(new Date).getTime(),o.move={x:i,y:a},o.start={x:i,y:a},r.fingers++};r.event=t,n.defaultListener&&(r.listener=n.defaultListener,delete n.defaultListener);for(var a=!r.fingers,s=r.tracker,v=t.changedTouches||e.getCoords(t),u=v.length,d=0;u>d;d++){var c=v[d],f=c.identifier||1/0;if(r.fingers){if(r.fingers>=r.maxFingers){var l=[];for(var f in r.tracker)l.push(f);return n.identifier=l.join(","),a}var p=0;for(var g in s){if(s[g].up){delete s[g],i(c,f),r.cancel=!0;break}p++}if(s[f])continue;i(c,f)}else s=r.tracker={},n.bbox=r.bbox=e.getBoundingBox(r.target),r.fingers=0,r.cancel=!1,i(c,f)}var l=[];for(var f in r.tracker)l.push(f);return n.identifier=l.join(","),a},e.pointerEnd=function(e,t,n,r){for(var o=e.touches||[],i=o.length,a={},s=0;i>s;s++){var v=o[s],u=v.identifier;a[u||1/0]=!0}for(var u in n.tracker){var d=n.tracker[u];a[u]||d.up||(r&&r({pageX:d.pageX,pageY:d.pageY,changedTouches:[{pageX:d.pageX,pageY:d.pageY,identifier:"Infinity"===u?1/0:u}]},"up"),d.up=!0,n.fingers--)}if(0!==n.fingers)return!1;var c=[];n.gestureFingers=0;for(var u in n.tracker)n.gestureFingers++,c.push(u);return t.identifier=c.join(","),!0},e.getCoords=function(t){return e.getCoords=t.pageX!==void 0?function(e){return Array({type:"mouse",x:e.pageX,y:e.pageY,pageX:e.pageX,pageY:e.pageY,identifier:e.pointerId||1/0})}:function(e){return e=e||window.event,Array({type:"mouse",x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop,pageX:e.clientX+document.documentElement.scrollLeft,pageY:e.clientY+document.documentElement.scrollTop,identifier:1/0})},e.getCoords(t)},e.getCoord=function(t){if("ontouchstart"in window){var n=0,r=0;e.getCoord=function(e){var t=e.changedTouches;return t&&t.length?{x:n=t[0].pageX,y:r=t[0].pageY}:{x:n,y:r}}}else e.getCoord=t.pageX!==void 0&&t.pageY!==void 0?function(e){return{x:e.pageX,y:e.pageY}}:function(e){return e=e||window.event,{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}};return e.getCoord(t)},e.getBoundingBox=function(e){(e===window||e===document)&&(e=document.body);var t={},n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.x1=n.left,t.y1=n.top,t.x2=t.x1+t.width,t.y2=t.y1+t.height,t.scaleX=n.width/e.offsetWidth||1,t.scaleY=n.height/e.offsetHeight||1,t.scrollLeft=0,t.scrollTop=0;for(var r=e.parentNode;null!==r&&r!==document.body&&void 0!==r.scrollTop;){var o=window.getComputedStyle(r),i=o.getPropertyValue("position");if("absolute"===i)break;if("fixed"===i){t.scrollTop-=r.parentNode.scrollTop;break}t.scrollLeft+=r.scrollLeft,t.scrollTop+=r.scrollTop,r=r.parentNode}return t},function(){var t=navigator.userAgent.toLowerCase(),n=-1!==t.indexOf("macintosh");if(n&&-1!==t.indexOf("khtml"))var r={91:!0,93:!0};else if(n&&-1!==t.indexOf("firefox"))var r={224:!0};else var r={17:!0};e.metaTrackerReset=function(){e.metaKey=!1,e.ctrlKey=!1,e.shiftKey=!1,e.altKey=!1},e.metaTracker=function(t){var n=!!r[t.keyCode];return n&&(e.metaKey="keydown"===t.type),e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.altKey=t.altKey,n}}(),e}(Event.proxy),Event===void 0)var Event={};if(Event.MutationObserver=function(){var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,t=function(){var e=document.createElement("p"),t=!1,n=function(){t=!0};if(e.addEventListener)e.addEventListener("DOMAttrModified",n,!1);else{if(!e.attachEvent)return!1;e.attachEvent("onDOMAttrModified",n)}return e.setAttribute("id","target"),t}();return function(n,r){if(e){var o={subtree:!1,attributes:!0},i=new e(function(e){e.forEach(function(e){r.call(e.target,e.attributeName)})});i.observe(n,o)}else t?Event.add(n,"DOMAttrModified",function(e){r.call(n,e.attrName)}):"onpropertychange"in document.body&&Event.add(n,"propertychange",function(){r.call(n,window.event.propertyName)})}}(),Event===void 0)var Event={};if(Event.proxy===void 0&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.click=function(t){t.gesture=t.gesture||"click",t.maxFingers=t.maxFingers||t.fingers||1;var n;t.onPointerDown=function(n){e.pointerStart(n,r,t)&&(Event.add(t.doc,"mousemove",t.onPointerMove).listener(n),Event.add(t.doc,"mouseup",t.onPointerUp))},t.onPointerMove=function(e){n=e},t.onPointerUp=function(o){if(e.pointerEnd(o,r,t)){if(Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp),n.cancelBubble&&++n.bubble>1)return;var i=n.changedTouches||e.getCoords(n),a=i[0],s=t.bbox,v=e.getBoundingBox(t.target);if("relative"===t.position)var u=a.pageX+s.scrollLeft-s.x1,d=a.pageY+s.scrollTop-s.y1;else var u=a.pageX-s.x1,d=a.pageY-s.y1;if(u>0&&s.width>u&&d>0&&s.height>d&&s.scrollTop===v.scrollTop){for(var c in t.tracker)break;var f=t.tracker[c];r.x=f.start.x,r.y=f.start.y,t.listener(n,r)}}};var r=e.pointerSetup(t);return r.state="click",Event.add(t.target,"mousedown",t.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.click=e.click,e}(Event.proxy),Event===void 0)var Event={};if(Event.proxy===void 0&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.dbltap=e.dblclick=function(t){t.gesture=t.gesture||"dbltap",t.maxFingers=t.maxFingers||t.fingers||1;var n,r,o,i,a,s=700;t.onPointerDown=function(u){var d=u.changedTouches||e.getCoords(u);n&&!r?(a=d[0],r=(new Date).getTime()-n):(i=d[0],n=(new Date).getTime(),r=0,clearTimeout(o),o=setTimeout(function(){n=0},s)),e.pointerStart(u,v,t)&&(Event.add(t.doc,"mousemove",t.onPointerMove).listener(u),Event.add(t.doc,"mouseup",t.onPointerUp))},t.onPointerMove=function(s){if(n&&!r){var v=s.changedTouches||e.getCoords(s);a=v[0]}var u=t.bbox;if("relative"===t.position)var d=a.pageX+u.scrollLeft-u.x1,c=a.pageY+u.scrollTop-u.y1;else var d=a.pageX-u.x1,c=a.pageY-u.y1;d>0&&u.width>d&&c>0&&u.height>c&&25>=Math.abs(a.pageX-i.pageX)&&25>=Math.abs(a.pageY-i.pageY)||(Event.remove(t.doc,"mousemove",t.onPointerMove),clearTimeout(o),n=r=0)},t.onPointerUp=function(i){if(e.pointerEnd(i,v,t)&&(Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp)),n&&r){if(s>=r&&!(i.cancelBubble&&++i.bubble>1)){v.state=t.gesture;for(var a in t.tracker)break;var u=t.tracker[a];v.x=u.start.x,v.y=u.start.y,t.listener(i,v)}clearTimeout(o),n=r=0}};var v=e.pointerSetup(t);return v.state="dblclick",Event.add(t.target,"mousedown",t.onPointerDown),v},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.dbltap=e.dbltap,Event.Gesture._gestureHandlers.dblclick=e.dblclick,e}(Event.proxy),Event===void 0)var Event={};if(Event.proxy===void 0&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.dragElement=function(t,n){e.drag({event:n,target:t,position:"move",listener:function(e,n){t.style.left=n.x+"px",t.style.top=n.y+"px",Event.prevent(e)}})},e.drag=function(t){t.gesture="drag",t.onPointerDown=function(r){e.pointerStart(r,n,t)&&(t.monitor||(Event.add(t.doc,"mousemove",t.onPointerMove),Event.add(t.doc,"mouseup",t.onPointerUp))),t.onPointerMove(r,"down")},t.onPointerMove=function(r,o){if(!t.tracker)return t.onPointerDown(r);for(var i=t.bbox,a=r.changedTouches||e.getCoords(r),s=a.length,v=0;s>v;v++){var u=a[v],d=u.identifier||1/0,c=t.tracker[d];c&&(c.pageX=u.pageX,c.pageY=u.pageY,n.state=o||"move",n.identifier=d,n.start=c.start,n.fingers=t.fingers,"differenceFromLast"===t.position?(n.x=c.pageX-c.offsetX,n.y=c.pageY-c.offsetY,c.offsetX=c.pageX,c.offsetY=c.pageY):"relative"===t.position?(n.x=c.pageX+i.scrollLeft-c.offsetX,n.y=c.pageY+i.scrollTop-c.offsetY):(n.x=c.pageX-c.offsetX,n.y=c.pageY-c.offsetY),t.listener(r,n))}},t.onPointerUp=function(r){e.pointerEnd(r,n,t,t.onPointerMove)&&(t.monitor||(Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp)))};var n=e.pointerSetup(t);return t.event?t.onPointerDown(t.event):(Event.add(t.target,"mousedown",t.onPointerDown),t.monitor&&(Event.add(t.doc,"mousemove",t.onPointerMove),Event.add(t.doc,"mouseup",t.onPointerUp))),n},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.drag=e.drag,e}(Event.proxy),Event===void 0)var Event={};if(Event.proxy===void 0&&(Event.proxy={}),Event.proxy=function(e){"use strict";var t=Math.PI/180;return e.gesture=function(n){n.gesture=n.gesture||"gesture",n.minFingers=n.minFingers||n.fingers||2,n.onPointerDown=function(t){var o=n.fingers;if(e.pointerStart(t,r,n)&&(Event.add(n.doc,"mousemove",n.onPointerMove),Event.add(n.doc,"mouseup",n.onPointerUp)),n.fingers===n.minFingers&&o!==n.fingers){r.fingers=n.minFingers,r.scale=1,r.rotation=0,r.state="start";var i="";for(var a in n.tracker)i+=a;r.identifier=parseInt(i),n.listener(t,r)}},n.onPointerMove=function(o){for(var i=n.bbox,a=n.tracker,s=o.changedTouches||e.getCoords(o),v=s.length,u=0;v>u;u++){var d=s[u],c=d.identifier||1/0,f=a[c];f&&("relative"===n.position?(f.move.x=d.pageX+i.scrollLeft-i.x1,f.move.y=d.pageY+i.scrollTop-i.y1):(f.move.x=d.pageX-i.x1,f.move.y=d.pageY-i.y1))}if(!(n.fingers<n.minFingers)){var s=[],l=0,p=0,g=0,m=0,v=0;for(var c in a){var d=a[c];d.up||(g+=d.move.x,m+=d.move.y,v++)}g/=v,m/=v;for(var c in a){var d=a[c];if(!d.up){var E=d.start;if(!E.distance){var y=E.x-g,h=E.y-m;E.distance=Math.sqrt(y*y+h*h),E.angle=Math.atan2(y,h)/t}var y=d.move.x-g,h=d.move.y-m,x=Math.sqrt(y*y+h*h);l+=x/E.distance;var w=Math.atan2(y,h)/t,P=(E.angle-w+360)%360-180;d.DEG2=d.DEG1,d.DEG1=P>0?P:-P,d.DEG2!==void 0&&(P>0?d.rotation+=d.DEG1-d.DEG2:d.rotation-=d.DEG1-d.DEG2,p+=d.rotation),s.push(d.move)}}r.touches=s,r.fingers=n.fingers,r.scale=l/n.fingers,r.rotation=p/n.fingers,r.state="change",n.listener(o,r)}},n.onPointerUp=function(t){var o=n.fingers;e.pointerEnd(t,r,n)&&(Event.remove(n.doc,"mousemove",n.onPointerMove),Event.remove(n.doc,"mouseup",n.onPointerUp)),o===n.minFingers&&n.fingers<n.minFingers&&(r.fingers=n.fingers,r.state="end",n.listener(t,r))};var r=e.pointerSetup(n);return Event.add(n.target,"mousedown",n.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.gesture=e.gesture,e}(Event.proxy),Event===void 0)var Event={};if(Event.proxy===void 0&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.pointerdown=e.pointermove=e.pointerup=function(t){if(t.gesture=t.gesture||"pointer",!t.target.isPointerEmitter){var n=!0;t.onPointerDown=function(e){n=!1,r.gesture="pointerdown",t.listener(e,r)},t.onPointerMove=function(e){r.gesture="pointermove",t.listener(e,r,n)},t.onPointerUp=function(e){n=!0,r.gesture="pointerup",t.listener(e,r,!0)};var r=e.pointerSetup(t);return Event.add(t.target,"mousedown",t.onPointerDown),Event.add(t.target,"mousemove",t.onPointerMove),Event.add(t.doc,"mouseup",t.onPointerUp),t.target.isPointerEmitter=!0,r}},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.pointerdown=e.pointerdown,Event.Gesture._gestureHandlers.pointermove=e.pointermove,Event.Gesture._gestureHandlers.pointerup=e.pointerup,e}(Event.proxy),Event===void 0)var Event={};if(Event.proxy===void 0&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.shake=function(e){var t={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:e.target,listener:e.listener,remove:function(){window.removeEventListener("devicemotion",u,!1)}},n=4,r=1e3,o=200,i=3,a=(new Date).getTime(),s={x:0,y:0,z:0},v={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},u=function(u){var d=.8,c=u.accelerationIncludingGravity;if(s.x=d*s.x+(1-d)*c.x,s.y=d*s.y+(1-d)*c.y,s.z=d*s.z+(1-d)*c.z,t.accelerationIncludingGravity=s,t.acceleration.x=c.x-s.x,t.acceleration.y=c.y-s.y,t.acceleration.z=c.z-s.z,"devicemotion"===e.gesture)return e.listener(u,t),void 0;for(var f="xyz",l=(new Date).getTime(),p=0,g=f.length;g>p;p++){var m=f[p],E=t.acceleration[m],y=v[m],h=Math.abs(E);if(!(r>l-a)&&h>n){var x=l*E/h,w=Math.abs(x+y.value);y.value&&o>w?(y.value=x,y.count++,y.count===i&&(e.listener(u,t),a=l,y.value=0,y.count=0)):(y.value=x,y.count=1)}}};return window.addEventListener?(window.addEventListener("devicemotion",u,!1),t):void 0},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.shake=e.shake,e}(Event.proxy),Event===void 0)var Event={};if(Event.proxy===void 0&&(Event.proxy={}),Event.proxy=function(e){"use strict";var t=Math.PI/180;return e.swipe=function(n){n.snap=n.snap||90,n.threshold=n.threshold||1,n.gesture=n.gesture||"swipe",n.onPointerDown=function(t){e.pointerStart(t,r,n)&&(Event.add(n.doc,"mousemove",n.onPointerMove).listener(t),Event.add(n.doc,"mouseup",n.onPointerUp))},n.onPointerMove=function(t){for(var r=t.changedTouches||e.getCoords(t),o=r.length,i=0;o>i;i++){var a=r[i],s=a.identifier||1/0,v=n.tracker[s];v&&(v.move.x=a.pageX,v.move.y=a.pageY,v.moveTime=(new Date).getTime())}},n.onPointerUp=function(o){if(e.pointerEnd(o,r,n)){Event.remove(n.doc,"mousemove",n.onPointerMove),Event.remove(n.doc,"mouseup",n.onPointerUp);var i,a,s,v,u={x:0,y:0},d=0,c=0,f=0;for(var l in n.tracker){var p=n.tracker[l],g=p.move.x-p.start.x,m=p.move.y-p.start.y;d+=p.move.x,c+=p.move.y,u.x+=p.start.x,u.y+=p.start.y,f++;var E=Math.sqrt(g*g+m*m),y=p.moveTime-p.startTime,v=Math.atan2(g,m)/t+180,a=y?E/y:0;if(s===void 0)s=v,i=a;else{if(!(20>=Math.abs(v-s)))return;s=(s+v)/2,i=(i+a)/2}}var h=n.gestureFingers;h>=n.minFingers&&n.maxFingers>=h&&i>n.threshold&&(u.x/=f,u.y/=f,r.start=u,r.x=d/f,r.y=c/f,r.angle=-(((s/n.snap+.5>>0)*n.snap||360)-360),r.velocity=i,r.fingers=h,r.state="swipe",n.listener(o,r))}};var r=e.pointerSetup(n);return Event.add(n.target,"mousedown",n.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.swipe=e.swipe,e}(Event.proxy),Event===void 0)var Event={};if(Event.proxy===void 0&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.longpress=function(t){return t.gesture="longpress",e.tap(t)},e.tap=function(t){t.delay=t.delay||500,t.timeout=t.timeout||250,t.driftDeviance=t.driftDeviance||10,t.gesture=t.gesture||"tap";var n,r;t.onPointerDown=function(i){if(e.pointerStart(i,o,t)){if(n=(new Date).getTime(),Event.add(t.doc,"mousemove",t.onPointerMove).listener(i),Event.add(t.doc,"mouseup",t.onPointerUp),"longpress"!==t.gesture)return;r=setTimeout(function(){if(!(i.cancelBubble&&++i.bubble>1)){var e=0;for(var n in t.tracker){var r=t.tracker[n];if(r.end===!0)return;if(t.cancel)return;e++}e>=t.minFingers&&t.maxFingers>=e&&(o.state="start",o.fingers=e,o.x=r.start.x,o.y=r.start.y,t.listener(i,o))}},t.delay)}},t.onPointerMove=function(n){for(var r=t.bbox,o=n.changedTouches||e.getCoords(n),i=o.length,a=0;i>a;a++){var s=o[a],v=s.identifier||1/0,u=t.tracker[v];if(u){if("relative"===t.position)var d=s.pageX+r.scrollLeft-r.x1,c=s.pageY+r.scrollTop-r.y1;else var d=s.pageX-r.x1,c=s.pageY-r.y1;var f=d-u.start.x,l=c-u.start.y,p=Math.sqrt(f*f+l*l);if(!(d>0&&r.width>d&&c>0&&r.height>c&&t.driftDeviance>=p))return Event.remove(t.doc,"mousemove",t.onPointerMove),t.cancel=!0,void 0}}},t.onPointerUp=function(i){if(e.pointerEnd(i,o,t)){if(clearTimeout(r),Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp),i.cancelBubble&&++i.bubble>1)return;if("longpress"===t.gesture)return"start"===o.state&&(o.state="end",t.listener(i,o)),void 0;if(t.cancel)return;if((new Date).getTime()-n>t.timeout)return;var a=t.gestureFingers;a>=t.minFingers&&t.maxFingers>=a&&(o.state="tap",o.fingers=t.gestureFingers,t.listener(i,o))}};var o=e.pointerSetup(t);return Event.add(t.target,"mousedown",t.onPointerDown),o},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.tap=e.tap,Event.Gesture._gestureHandlers.longpress=e.longpress,e}(Event.proxy),Event===void 0)var Event={};Event.proxy===void 0&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.wheel=function(e){var t,n=e.timeout||150,r=0,o={gesture:"wheel",state:"start",wheelDelta:0,target:e.target,listener:e.listener,preventElasticBounce:function(){var e=this.target,t=e.scrollTop,n=t+e.offsetHeight,r=e.scrollHeight;n===r&&0>=this.wheelDelta?Event.cancel(event):0===t&&this.wheelDelta>=0&&Event.cancel(event),Event.stop(event)},add:function(){e.target[a](v,i,!1)},remove:function(){e.target[s](v,i,!1)}},i=function(i){i=i||window.event,o.state=r++?"change":"start",o.wheelDelta=i.detail?-20*i.detail:i.wheelDelta,e.listener(i,o),clearTimeout(t),t=setTimeout(function(){r=0,o.state="end",o.wheelDelta=0,e.listener(i,o)},n)},a=document.addEventListener?"addEventListener":"attachEvent",s=document.removeEventListener?"removeEventListener":"detachEvent",v=Event.getEventSupport("mousewheel")?"mousewheel":"DOMMouseScroll";return e.target[a](v,i,!1),o},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.wheel=e.wheel,e}(Event.proxy);