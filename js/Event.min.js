if(typeof Event=="undefined")var Event={};if(typeof eventjs=="undefined")var eventjs=Event;Event=function(e){"use strict";e.modifyEventListener=!0,e.modifySelectors=!0,e.add=function(e,t,r,i){return n(e,t,r,i,"add")},e.remove=function(e,t,r,i){return n(e,t,r,i,"remove")},e.stop=function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.bubble=0},e.prevent=function(e){e.preventDefault&&e.preventDefault(),e.returnValue=!1},e.cancel=function(t){e.stop(t),e.prevent(t)},e.supports=function(e,t){typeof e=="string"&&(t=e,e=window),t="on"+t;if(t in e)return!0;e.setAttribute||(e=document.createElement("div"));if(e.setAttribute&&e.removeAttribute){e.setAttribute(t,"");var n=typeof e[t]=="function";return typeof e[t]!="undefined"&&(e[t]=null),e.removeAttribute(t),n}};var t=function(e){if(!e||typeof e!="object")return e;var n=new e.constructor;for(var r in e)!e[r]||typeof e[r]!="object"?n[r]=e[r]:n[r]=t(e[r]);return n},n=function(u,c,h,p,d,v){p=p||{};if(typeof u=="string"&&c==="ready"){var m=(new Date).getTime(),g=p.timeout,y=p.interval||1e3/60,b=window.setInterval(function(){(new Date).getTime()-m>g&&window.clearInterval(b),document.querySelector(u)&&(window.clearInterval(b),h())},y);return}if(typeof u=="string"){u=document.querySelectorAll(u);if(u.length===0)return i("Missing target on listener!");u.length===1&&(u=u[0])}var w,E={};if(u.length>0){for(var S=0,x=u.length;S<x;S++)w=n(u[S],c,h,t(p),d),w&&(E[S]=w);return r(E)}c.indexOf&&c.indexOf(" ")!==-1&&(c=c.split(" ")),c.indexOf&&c.indexOf(",")!==-1&&(c=c.split(","));if(typeof c!="string"){if(typeof c.length=="number")for(var T=0,N=c.length;T<N;T++)w=n(u,c[T],h,t(p),d),w&&(E[c[T]]=w);else for(var C in c)typeof c[C]=="function"?w=n(u,C,c[C],t(p),d):w=n(u,C,c[C].listener,t(c[C]),d),w&&(E[C]=w);return r(E)}if(typeof h!="function")return i("Listener is not a function!");var k=p.useCapture||!1,L=s(c)+a(u)+"."+a(h)+"."+(k?1:0);if(e.Gesture&&e.Gesture._gestureHandlers[c]){if(d==="remove"){if(!o[L])return;o[L].remove(),delete o[L]}else if(d==="add"){if(o[L])return o[L];if(p.useCall&&!e.modifyEventListener){var A=h;h=function(e,t){for(var n in t)e[n]=t[n];return A.call(u,e)}}p.gesture=c,p.target=u,p.listener=h,p.fromOverwrite=v,o[L]=e.proxy[c](p)}}else{c=s(c);if(d==="remove"){if(!o[L])return;u[l](c,h,k),delete o[L]}else if(d==="add"){if(o[L])return o[L];u[f](c,h,k),o[L]={type:c,target:u,listener:h,remove:function(){e.remove(u,c,h,p)}}}}return o[L]},r=function(e){return{remove:function(){for(var t in e)e[t].remove()},add:function(){for(var t in e)e[t].add()}}},i=function(e){if(typeof console=="undefined")return;if(typeof console.error=="undefined")return;console.error(e)},s=function(){var t={};return function(n){return e.pointerType||(window.navigator.msPointerEnabled?(e.pointerType="mspointer",t={mousedown:"MSPointerDown",mousemove:"MSPointerMove",mouseup:"MSPointerUp"}):e.supports("touchstart")?(e.pointerType="touch",t={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"}):e.pointerType="mouse"),t[n]&&(n=t[n]),document.addEventListener?n:"on"+n}}(),o={},u=0,a=function(e){return e===window?"#window":e===document?"#document":e?(e.uniqueID||(e.uniqueID="id"+u++),e.uniqueID):i("Missing target on listener!")},f=document.addEventListener?"addEventListener":"attachEvent",l=document.removeEventListener?"removeEventListener":"detachEvent";return e.createPointerEvent=function(t,n,r){var i=n.gesture,s=n.target,o=t.changedTouches||e.proxy.getCoords(t);if(o.length){var u=o[0];n.pointers=r?[]:o,n.pageX=u.pageX,n.pageY=u.pageY,n.x=n.pageX,n.y=n.pageY}var a=document.createEvent("Event");a.initEvent(i,!0,!0),a.originalEvent=t;for(var f in n)a[f]=n[f];s.dispatchEvent(a)},e.modifyEventListener&&window.HTMLElement&&function(){var t=function(t){var r=function(r){var i=r+"EventListener",o=t[i];t[i]=function(t,i,u){if(e.Gesture&&e.Gesture._gestureHandlers[t]){var a=u;typeof u=="object"?a.useCall=!0:a={useCall:!0,useCapture:u},n(this,t,i,a,r,!0),o.call(this,t,i,u)}else o.call(this,s(t),i,u)}};r("add"),r("remove")};navigator.userAgent.match(/Firefox/)?(t(HTMLDivElement.prototype),t(HTMLCanvasElement.prototype)):t(HTMLElement.prototype),t(document),t(window)}(),e.modifySelectors&&function(){var e=NodeList.prototype;e.removeEventListener=function(e,t,n){for(var r=0,i=this.length;r<i;r++)this[r].removeEventListener(e,t,n)},e.addEventListener=function(e,t,n){for(var r=0,i=this.length;r<i;r++)this[r].addEventListener(e,t,n)}}(),e}(Event);if(typeof Event=="undefined")var Event={};typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.pointerSetup=function(e,t){e.doc=e.target.ownerDocument||e.target,e.minFingers=e.minFingers||e.fingers||1,e.maxFingers=e.maxFingers||e.fingers||Infinity,e.position=e.position||"relative",delete e.fingers,t=t||{},t.gesture=e.gesture,t.target=e.target,t.pointerType=Event.pointerType,Event.modifyEventListener&&e.fromOverwrite&&(e.listener=Event.createPointerEvent);var n=0,r=t.gesture.indexOf("pointer")===0&&Event.modifyEventListener?"pointer":"mouse";return t.listener=e.listener,t.proxy=function(n){t.defaultListener=e.listener,e.listener=n,n(e.event,t)},t.remove=function(){e.onPointerDown&&Event.remove(e.target,r+"down",e.onPointerDown),e.onPointerMove&&Event.remove(e.doc,r+"move",e.onPointerMove),e.onPointerUp&&Event.remove(e.doc,r+"up",e.onPointerUp)},t.resume=function(t){e.onPointerMove&&(!t||t.move)&&Event.add(e.doc,r+"move",e.onPointerMove),e.onPointerUp&&(!t||t.move)&&Event.add(e.doc,r+"up",e.onPointerUp),e.fingers=n},t.pause=function(t){n=e.fingers,e.onPointerMove&&(!t||t.move)&&Event.remove(e.doc,r+"move",e.onPointerMove),e.onPointerUp&&(!t||t.up)&&Event.remove(e.doc,r+"up",e.onPointerUp),e.fingers=0},t},e.pointerStart=function(t,n,r){var i=function(e,t){var n=r.bbox,i=o[t]={};switch(r.position){case"absolute":i.offsetX=0,i.offsetY=0;break;case"difference":i.offsetX=e.pageX,i.offsetY=e.pageY;break;case"move":i.offsetX=e.pageX-n.x1,i.offsetY=e.pageY-n.y1;break;default:i.offsetX=n.x1,i.offsetY=n.y1}if(r.position==="relative")var s=(e.pageX+n.scrollLeft-i.offsetX)*n.scaleX,u=(e.pageY+n.scrollTop-i.offsetY)*n.scaleY;else var s=e.pageX-i.offsetX,u=e.pageY-i.offsetY;i.rotation=0,i.scale=1,i.startTime=i.moveTime=(new Date).getTime(),i.move={x:s,y:u},i.start={x:s,y:u},r.fingers++};r.event=t,n.defaultListener&&(r.listener=n.defaultListener,delete n.defaultListener);var s=!r.fingers,o=r.tracker,u=t.changedTouches||e.getCoords(t),a=u.length;for(var f=0;f<a;f++){var l=u[f],c=l.identifier||Infinity;if(r.fingers){if(r.fingers>=r.maxFingers){var h=[];for(var c in r.tracker)h.push(c);return n.identifier=h.join(","),s}var p=0;for(var d in o){if(o[d].up){delete o[d],i(l,c),r.cancel=!0;break}p++}if(o[c])continue;i(l,c)}else o=r.tracker={},n.bbox=r.bbox=e.getBoundingBox(r.target),r.fingers=0,r.cancel=!1,i(l,c)}var h=[];for(var c in r.tracker)h.push(c);return n.identifier=h.join(","),s},e.pointerEnd=function(e,t,n,r){var i=e.touches||[],s=i.length,o={};for(var u=0;u<s;u++){var a=i[u],f=a.identifier;o[f||Infinity]=!0}for(var f in n.tracker){var l=n.tracker[f];if(o[f]||l.up)continue;r&&r({pageX:l.pageX,pageY:l.pageY,changedTouches:[{pageX:l.pageX,pageY:l.pageY,identifier:f==="Infinity"?Infinity:f}]},"up"),l.up=!0,n.fingers--}if(n.fingers!==0)return!1;var c=[];n.gestureFingers=0;for(var f in n.tracker)n.gestureFingers++,c.push(f);return t.identifier=c.join(","),!0},e.getCoords=function(t){return typeof t.pageX!="undefined"?e.getCoords=function(e){return Array({type:"mouse",x:e.pageX,y:e.pageY,pageX:e.pageX,pageY:e.pageY,identifier:Infinity})}:e.getCoords=function(e){return e=e||window.event,Array({type:"mouse",x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop,pageX:e.clientX+document.documentElement.scrollLeft,pageY:e.clientY+document.documentElement.scrollTop,identifier:Infinity})},e.getCoords(t)},e.getCoord=function(t){if("ontouchstart"in window){var n=0,r=0;e.getCoord=function(e){var t=e.changedTouches;return t.length?{x:n=t[0].pageX,y:r=t[0].pageY}:{x:n,y:r}}}else typeof t.pageX!="undefined"&&typeof t.pageY!="undefined"?e.getCoord=function(e){return{x:e.pageX,y:e.pageY}}:e.getCoord=function(e){return e=e||window.event,{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}};return e.getCoord(t)},e.getBoundingBox=function(e){if(e===window||e===document)e=document.body;var t={x1:0,y1:0,x2:0,y2:0,scrollLeft:0,scrollTop:0};e===document.body?(t.height=window.innerHeight,t.width=window.innerWidth):(t.height=e.offsetHeight,t.width=e.offsetWidth),t.scaleX=e.width/t.width||1,t.scaleY=e.height/t.height||1;var n=e;while(n!==null)t.x1+=n.offsetLeft,t.y1+=n.offsetTop,n=n.offsetParent;var n=e.parentNode;while(n!==null){if(n===document.body)break;if(n.scrollTop===undefined)break;t.scrollLeft+=n.scrollLeft,t.scrollTop+=n.scrollTop,n=n.parentNode}return t.x2=t.x1+t.width,t.y2=t.y1+t.height,t},function(){var t=navigator.userAgent.toLowerCase(),n=t.indexOf("macintosh")!==-1;if(n&&t.indexOf("khtml")!==-1)var r={91:!0,93:!0};else if(n&&t.indexOf("firefox")!==-1)var r={224:!0};else var r={17:!0};e.isMetaKey=function(e){return!!r[e.keyCode]},e.metaTracker=function(t){r[t.keyCode]&&(e.metaKey=t.type==="keydown")}}(),e}(Event.proxy);if(typeof Event=="undefined")var Event={};typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.click=function(t){t.maxFingers=t.maxFingers||t.fingers||1;var n;t.onPointerDown=function(n){e.pointerStart(n,r,t)&&(Event.add(t.doc,"mousemove",t.onPointerMove).listener(n),Event.add(t.doc,"mouseup",t.onPointerUp))},t.onPointerMove=function(e){n=e},t.onPointerUp=function(i){if(e.pointerEnd(i,r,t)){Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp);if(n.cancelBubble&&++n.bubble>1)return;var s=n.changedTouches||e.getCoords(n),o=s[0],u=t.bbox,a=e.getBoundingBox(t.target);if(t.position==="relative")var f=(o.pageX+u.scrollLeft-u.x1)*u.scaleX,l=(o.pageY+u.scrollTop-u.y1)*u.scaleY;else var f=o.pageX-u.x1,l=o.pageY-u.y1;f>0&&f<u.width&&l>0&&l<u.height&&u.scrollTop===a.scrollTop&&t.listener(n,r)}};var r=e.pointerSetup(t);return r.state="click",Event.add(t.target,"mousedown",t.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.click=e.click,e}(Event.proxy);if(typeof Event=="undefined")var Event={};typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.dbltap=e.dblclick=function(t){t.maxFingers=t.maxFingers||t.fingers||1;var n=700,r,i,s,o,u;t.onPointerDown=function(f){var l=f.changedTouches||e.getCoords(f);r&&!i?(u=l[0],i=(new Date).getTime()-r):(o=l[0],r=(new Date).getTime(),i=0,clearTimeout(s),s=setTimeout(function(){r=0},n)),e.pointerStart(f,a,t)&&(Event.add(t.doc,"mousemove",t.onPointerMove).listener(f),Event.add(t.doc,"mouseup",t.onPointerUp))},t.onPointerMove=function(n){if(r&&!i){var a=n.changedTouches||e.getCoords(n);u=a[0]}var f=t.bbox;if(t.position==="relative")var l=(u.pageX+f.scrollLeft-f.x1)*f.scaleX,c=(u.pageY+f.scrollTop-f.y1)*f.scaleY;else var l=u.pageX-f.x1,c=u.pageY-f.y1;l>0&&l<f.width&&c>0&&c<f.height&&Math.abs(u.pageX-o.pageX)<=25&&Math.abs(u.pageY-o.pageY)<=25||(Event.remove(t.doc,"mousemove",t.onPointerMove),clearTimeout(s),r=i=0)},t.onPointerUp=function(o){e.pointerEnd(o,a,t)&&(Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp)),r&&i&&(i<=n&&!(o.cancelBubble&&++o.bubble>1)&&(a.state=t.gesture,t.listener(o,a)),clearTimeout(s),r=i=0)};var a=e.pointerSetup(t);return a.state="dblclick",Event.add(t.target,"mousedown",t.onPointerDown),a},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.dbltap=e.dbltap,Event.Gesture._gestureHandlers.dblclick=e.dblclick,e}(Event.proxy);if(typeof Event=="undefined")var Event={};typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.dragElement=function(t,n){e.drag({event:n,target:t,position:"move",listener:function(e,n){t.style.left=n.x+"px",t.style.top=n.y+"px",Event.prevent(e)}})},e.drag=function(t){t.gesture="drag",t.onPointerDown=function(r){e.pointerStart(r,n,t)&&(t.monitor||(Event.add(t.doc,"mousemove",t.onPointerMove),Event.add(t.doc,"mouseup",t.onPointerUp))),t.onPointerMove(r,"down")},t.onPointerMove=function(r,i){if(!t.tracker)return t.onPointerDown(r);var s=t.bbox,o=r.changedTouches||e.getCoords(r),u=o.length;for(var a=0;a<u;a++){var f=o[a],l=f.identifier||Infinity,c=t.tracker[l];if(!c)continue;c.pageX=f.pageX,c.pageY=f.pageY,n.state=i||"move",n.identifier=l,n.start=c.start,n.fingers=t.fingers,t.position==="relative"?(n.x=(c.pageX+s.scrollLeft-c.offsetX)*s.scaleX,n.y=(c.pageY+s.scrollTop-c.offsetY)*s.scaleY):(n.x=c.pageX-c.offsetX,n.y=c.pageY-c.offsetY),t.listener(r,n)}},t.onPointerUp=function(r){e.pointerEnd(r,n,t,t.onPointerMove)&&(t.monitor||(Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp)))};var n=e.pointerSetup(t);return t.event?t.onPointerDown(t.event):(Event.add(t.target,"mousedown",t.onPointerDown),t.monitor&&(Event.add(t.doc,"mousemove",t.onPointerMove),Event.add(t.doc,"mouseup",t.onPointerUp))),n},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.drag=e.drag,e}(Event.proxy);if(typeof Event=="undefined")var Event={};typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){"use strict";var t=Math.PI/180;return e.gesture=function(n){n.minFingers=n.minFingers||n.fingers||2,n.onPointerDown=function(t){var i=n.fingers;e.pointerStart(t,r,n)&&(Event.add(n.doc,"mousemove",n.onPointerMove),Event.add(n.doc,"mouseup",n.onPointerUp));if(n.fingers===n.minFingers&&i!==n.fingers){r.fingers=n.minFingers,r.scale=1,r.rotation=0,r.state="start";var s="";for(var o in n.tracker)s+=o;r.identifier=parseInt(s),n.listener(t,r)}},n.onPointerMove=function(i,s){var o=n.bbox,u=n.tracker,a=i.changedTouches||e.getCoords(i),f=a.length;for(var l=0;l<f;l++){var c=a[l],h=c.identifier||Infinity,p=u[h];if(!p)continue;n.position==="relative"?(p.move.x=(c.pageX+o.scrollLeft-o.x1)*o.scaleX,p.move.y=(c.pageY+o.scrollTop-o.y1)*o.scaleY):(p.move.x=c.pageX-o.x1,p.move.y=c.pageY-o.y1)}if(n.fingers<n.minFingers)return;var a=[],d=0,v=0,m=0,g=0,f=0;for(var h in u){var c=u[h];if(c.up)continue;m+=c.move.x,g+=c.move.y,f++}m/=f,g/=f;for(var h in u){var c=u[h];if(c.up)continue;var y=c.start;if(!y.distance){var b=y.x-m,w=y.y-g;y.distance=Math.sqrt(b*b+w*w),y.angle=Math.atan2(b,w)/t}var b=c.move.x-m,w=c.move.y-g,E=Math.sqrt(b*b+w*w);d+=E/y.distance;var S=Math.atan2(b,w)/t,x=(y.angle-S+360)%360-180;c.DEG2=c.DEG1,c.DEG1=x>0?x:-x,typeof c.DEG2!="undefined"&&(x>0?c.rotation+=c.DEG1-c.DEG2:c.rotation-=c.DEG1-c.DEG2,v+=c.rotation),a.push(c.move)}r.touches=a,r.fingers=n.fingers,r.scale=d/n.fingers,r.rotation=v/n.fingers,r.state="change",n.listener(i,r)},n.onPointerUp=function(t){var i=n.fingers;e.pointerEnd(t,r,n)&&(Event.remove(n.doc,"mousemove",n.onPointerMove),Event.remove(n.doc,"mouseup",n.onPointerUp)),i===n.minFingers&&n.fingers<n.minFingers&&(r.fingers=n.fingers,r.state="end",n.listener(t,r))};var r=e.pointerSetup(n);return Event.add(n.target,"mousedown",n.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.gesture=e.gesture,e}(Event.proxy);if(typeof Event=="undefined")var Event={};typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.pointerdown=e.pointermove=e.pointerup=function(t){if(t.target.isPointerEmitter)return;var n=!0;t.onPointerDown=function(e){n=!1,r.gesture="pointerdown",t.listener(e,r)},t.onPointerMove=function(e){r.gesture="pointermove",t.listener(e,r,n)},t.onPointerUp=function(e){n=!0,r.gesture="pointerup",t.listener(e,r,!0)};var r=e.pointerSetup(t);return Event.add(t.target,"mousedown",t.onPointerDown),Event.add(t.target,"mousemove",t.onPointerMove),Event.add(t.doc,"mouseup",t.onPointerUp),t.target.isPointerEmitter=!0,r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.pointerdown=e.pointerdown,Event.Gesture._gestureHandlers.pointermove=e.pointermove,Event.Gesture._gestureHandlers.pointerup=e.pointerup,e}(Event.proxy);if(typeof Event=="undefined")var Event={};typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.shake=function(e){var t={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:e.target,listener:e.listener,remove:function(){window.removeEventListener("devicemotion",f,!1)}},n=4,r=1e3,i=200,s=3,o=(new Date).getTime(),u={x:0,y:0,z:0},a={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},f=function(f){var l=.8,c=f.accelerationIncludingGravity;u.x=l*u.x+(1-l)*c.x,u.y=l*u.y+(1-l)*c.y,u.z=l*u.z+(1-l)*c.z,t.accelerationIncludingGravity=u,t.acceleration.x=c.x-u.x,t.acceleration.y=c.y-u.y,t.acceleration.z=c.z-u.z;if(e.gesture==="devicemotion"){e.listener(f,t);return}var h="xyz",p=(new Date).getTime();for(var d=0,v=h.length;d<v;d++){var m=h[d],g=t.acceleration[m],y=a[m],b=Math.abs(g);if(p-o<r)continue;if(b>n){var w=p*g/b,E=Math.abs(w+y.value);y.value&&E<i?(y.value=w,y.count++,y.count===s&&(e.listener(f,t),o=p,y.value=0,y.count=0)):(y.value=w,y.count=1)}}};if(!window.addEventListener)return;return window.addEventListener("devicemotion",f,!1),t},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.shake=e.shake,e}(Event.proxy);if(typeof Event=="undefined")var Event={};typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){"use strict";var t=Math.PI/180;return e.swipe=function(n){n.snap=n.snap||90,n.threshold=n.threshold||1,n.onPointerDown=function(t){e.pointerStart(t,r,n)&&(Event.add(n.doc,"mousemove",n.onPointerMove).listener(t),Event.add(n.doc,"mouseup",n.onPointerUp))},n.onPointerMove=function(t){var r=t.changedTouches||e.getCoords(t),i=r.length;for(var s=0;s<i;s++){var o=r[s],u=o.identifier||Infinity,a=n.tracker[u];if(!a)continue;a.move.x=o.pageX,a.move.y=o.pageY,a.moveTime=(new Date).getTime()}},n.onPointerUp=function(i){if(e.pointerEnd(i,r,n)){Event.remove(n.doc,"mousemove",n.onPointerMove),Event.remove(n.doc,"mouseup",n.onPointerUp);var s,o,u,a,f={x:0,y:0},l=0,c=0,h=0;for(var p in n.tracker){var d=n.tracker[p],v=d.move.x-d.start.x,m=d.move.y-d.start.y;l+=d.move.x,c+=d.move.y,f.x+=d.start.x,f.y+=d.start.y,h++;var g=Math.sqrt(v*v+m*m),y=d.moveTime-d.startTime,a=Math.atan2(v,m)/t+180,o=y?g/y:0;if(typeof u=="undefined")u=a,s=o;else{if(!(Math.abs(a-u)<=20))return;u=(u+a)/2,s=(s+o)/2}}s>n.threshold&&(f.x/=h,f.y/=h,r.start=f,r.x=l/h,r.y=c/h,r.angle=-(((u/n.snap+.5>>0)*n.snap||360)-360),r.velocity=s,r.fingers=n.gestureFingers,r.state="swipe",n.listener(i,r))}};var r=e.pointerSetup(n);return Event.add(n.target,"mousedown",n.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.swipe=e.swipe,e}(Event.proxy);if(typeof Event=="undefined")var Event={};typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.tap=e.longpress=function(t){t.delay=t.delay||500,t.timeout=t.timeout||250;var n,r;t.onPointerDown=function(s){if(e.pointerStart(s,i,t)){n=(new Date).getTime(),Event.add(t.doc,"mousemove",t.onPointerMove).listener(s),Event.add(t.doc,"mouseup",t.onPointerUp);if(t.gesture!=="longpress")return;r=setTimeout(function(){if(s.cancelBubble&&++s.bubble>1)return;var e=0;for(var n in t.tracker){if(t.tracker[n].end===!0)return;if(t.cancel)return;e++}i.state="start",i.fingers=e,t.listener(s,i)},t.delay)}},t.onPointerMove=function(n){var r=t.bbox,i=n.changedTouches||e.getCoords(n),s=i.length;for(var o=0;o<s;o++){var u=i[o],a=u.identifier||Infinity,f=t.tracker[a];if(!f)continue;if(t.position==="relative")var l=(u.pageX+r.scrollLeft-r.x1)*r.scaleX,c=(u.pageY+r.scrollTop-r.y1)*r.scaleY;else var l=u.pageX-r.x1,c=u.pageY-r.y1;if(!(l>0&&l<r.width&&c>0&&c<r.height&&Math.abs(l-f.start.x)<=25&&Math.abs(c-f.start.y)<=25)){Event.remove(t.doc,"mousemove",t.onPointerMove),t.cancel=!0;return}}},t.onPointerUp=function(s){if(e.pointerEnd(s,i,t)){clearTimeout(r),Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp);if(s.cancelBubble&&++s.bubble>1)return;if(t.gesture==="longpress"){i.state==="start"&&(i.state="end",t.listener(s,i));return}if(t.cancel)return;if((new Date).getTime()-n>t.timeout)return;i.state="tap",i.fingers=t.gestureFingers,t.listener(s,i)}};var i=e.pointerSetup(t);return Event.add(t.target,"mousedown",t.onPointerDown),i},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.tap=e.tap,Event.Gesture._gestureHandlers.longpress=e.longpress,e}(Event.proxy);if(typeof Event=="undefined")var Event={};typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){"use strict";return e.wheel=function(e){var t,n=e.timeout||150,r=0,i={gesture:"wheel",state:"start",wheelDelta:0,target:e.target,listener:e.listener,remove:function(){e.target[u](a,s,!1)}},s=function(s){s=s||window.event,i.state=r++?"change":"start",i.wheelDelta=s.detail?s.detail*-20:s.wheelDelta,e.listener(s,i),clearTimeout(t),t=setTimeout(function(){r=0,i.state="end",i.wheelDelta=0,e.listener(s,i)},n)},o=document.addEventListener?"addEventListener":"attachEvent",u=document.removeEventListener?"removeEventListener":"detachEvent",a=Event.supports("mousewheel")?"mousewheel":"DOMMouseScroll";return e.target[o](a,s,!1),i},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.wheel=e.wheel,e}(Event.proxy);